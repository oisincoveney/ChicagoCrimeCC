[{"/home/oisin/projects/ChicagoCrimeCC/client/src/index.js":"1","/home/oisin/projects/ChicagoCrimeCC/client/src/App.js":"2","/home/oisin/projects/ChicagoCrimeCC/client/src/pages/Map/Map.js":"3","/home/oisin/projects/ChicagoCrimeCC/client/src/pages/Dashboard/Dashboard.jsx":"4","/home/oisin/projects/ChicagoCrimeCC/client/src/pages/Dashboard/BarChart/index.js":"5","/home/oisin/projects/ChicagoCrimeCC/client/src/pages/Dashboard/BarChart/BarChart.jsx":"6","/home/oisin/projects/ChicagoCrimeCC/client/src/hooks/useD3.js":"7"},{"size":738,"mtime":1608067987440,"results":"8","hashOfConfig":"9"},{"size":1425,"mtime":1608335572700,"results":"10","hashOfConfig":"9"},{"size":1469,"mtime":1608335572710,"results":"11","hashOfConfig":"9"},{"size":1000,"mtime":1608335572700,"results":"12","hashOfConfig":"9"},{"size":61,"mtime":1608067987440,"results":"13","hashOfConfig":"9"},{"size":2460,"mtime":1608067987440,"results":"14","hashOfConfig":"9"},{"size":419,"mtime":1608067987440,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"187gbfy",{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"18"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26","usedDeprecatedRules":"18"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"18"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"/home/oisin/projects/ChicagoCrimeCC/client/src/index.js",[],["34","35"],"/home/oisin/projects/ChicagoCrimeCC/client/src/App.js",[],"/home/oisin/projects/ChicagoCrimeCC/client/src/pages/Map/Map.js",["36","37","38","39"],"\nimport React, { useEffect, useState } from 'react';\n\nimport { useGoogleMaps } from 'react-hook-google-maps';\nimport './Map.css';\nimport { SuspenseWithPerf, useDatabase } from 'reactfire';\nimport 'firebase/database'\n\n\nlet prev_infowindow = false;\nlet markers = [];\n\n\nconst Map = React.memo(function Map() {\n\n    const { ref, map, google } = useGoogleMaps(\n        process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\n        {\n            center: { lat: 41.881832, lng: -87.623177 },\n            zoom: 11,\n        },\n    );\n    console.log(\"render MapWithMarkers\");\n\n\n\n\n    const containerStyle = {\n        width: '100vw',\n        height: '100%'\n    };\n\n\n    const center = {\n        lat: 41,\n        lng: -87\n    }\n\n\n    const db = useDatabase();\n\n    const [data, setData] = useState([]);\n\n\n\n\n    // db.ref('/Crimes').orderByKey().limitToFirst(10).once('value').then(res => {\n    //     const result = res.exportVal();\n    //     console.log(result);\n    //     Object.values(result).map((crime) => {\n    //         db.ref('/Location').child(crime.Location).once('value').then(location => {\n    //             const loc = location.exportVal();\n\n    //             console.log(\"case id: \" + crime[\"Case Number\"] + \" Lat: \" + loc.Latitude + \" Lon: \" + loc.Longitude);\n    //             const caseNo = crime[\"Case Number\"];\n    //             setData({...data, caseNo : {lat: loc.Latitude, lon: loc.Longitude}});\n    //             console.log(data);\n    //         });\n    //     });\n    // });\n\n    useEffect(() => {\n        \n        const fetchData =  () => {\n            db.ref('/Crimes').orderByKey().limitToFirst(500).once('value').then(res => {\n                // // setCrime(res.exportVal());\n                // return res.exportVal();\n                const result = res.exportVal();\n\n                let d = [];\n                // // console.log(result);\n                Object.values(result).map((crime) => {\n                    db.ref('/Location').child(crime.Location).once('value').then(location => {\n                        let loc = location.exportVal();\n                        crime.Location = loc[\"Location Description\"];\n                        crime.lat = parseFloat(loc.Latitude);\n                        crime.lng = parseFloat(loc.Longitude);\n                        d.push(crime);\n                    });\n\n                });\n\n                setData(d);\n            });\n\n        };\n            fetchData();\n    }, [map]);\n    return (\n        <div className=\"map-container\">\n            <div ref={ref} style={containerStyle}></div>\n                <SuspenseWithPerf>\n                    \n                {\n                    data.map(k => {\n                        const pos = { lat: k.lat, lng: k.lng };\n\n                        const marker = new google.maps.Marker({ position: pos, map });\n                        const contentString = \"<div class='content'><strong>Case #:</strong><span>\" + k[\"Case Number\"] + \"</span><br/>\" +\n                            \"<strong>Arrested?: </strong><span>\" + (k.Arrest === \"true\" ? \"yes\" : \"no\") + \"</span><br/>\" +\n                            \"<strong>Date happened: </strong><span>\" + k.Date + \"</span><br/>\" +\n                            \"<strong>Description: </strong><span>\" + k.Description + \"</span><br/>\" +\n                            \"<strong>Location: </strong><span>\" + k.Location + \"</span><br/></div>\";\n                        const infoWindow = new google.maps.InfoWindow({ content: contentString });\n                        marker.addListener(\"click\", () => {\n                            map.setZoom(15);\n                            map.setCenter(marker.getPosition());\n                            if (prev_infowindow) prev_infowindow.close();\n                            prev_infowindow = infoWindow;\n                            infoWindow.open(map, marker)\n                        });\n                        markers.push(marker);\n                    })\n                }\n                </SuspenseWithPerf>\n            \n        \n        </div>\n    );\n});\n\nexport default Map;","/home/oisin/projects/ChicagoCrimeCC/client/src/pages/Dashboard/Dashboard.jsx",["40","41","42","43","44","45","46"],"import React, { useRef, useState, useEffect } from 'react';\nimport BarChart from './BarChart/index'\nimport { useDatabase, SuspenseWithPerf } from 'reactfire';\nimport 'firebase/database'\n\n\nconst Dashboard = (props) => {\n\n  const container = useRef(null)\n  const testRef = useDatabase()\n\n  const [data, setData] = useState([])\n\n  useEffect(() => {\n\n    const fetchData = async () => {\n      await testRef.ref('Crimes/').orderByKey().limitToFirst(10).once('value').then(snapshot => {\n        setData(snapshot.exportVal())\n      })\n    }\n\n    fetchData()\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <SuspenseWithPerf fallback={'loading burrito status...'} traceId={'load-burrito-status'}>\n      <div id=\"vis-container\" ref={container}></div>\n      <BarChart></BarChart>\n      {JSON.stringify(data)}\n    </SuspenseWithPerf>\n  )\n};\n\nDashboard.propTypes = {\n  // bla: PropTypes.string,\n};\n\nDashboard.defaultProps = {\n  // bla: 'test',\n};\n\nexport default Dashboard;\n","/home/oisin/projects/ChicagoCrimeCC/client/src/pages/Dashboard/BarChart/index.js",[],"/home/oisin/projects/ChicagoCrimeCC/client/src/pages/Dashboard/BarChart/BarChart.jsx",["47"],"import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\n//import { Test } from './BarChart.styles';\nimport _ from 'lodash';\nimport {useD3} from '../../../hooks/useD3'\nimport * as d3 from 'd3'\n\nconst BarChart = (props) => {\n\n  const [data, setData] = useState([])\n  \n  const ref = useD3(\n    (svg) => {\n      const margins = {\n        left: 50,\n        right: 50,\n        top: 100,\n        bottom: 80\n      }\n      const width = 800\n      const height = 800\n\n      const x = d3.scaleLinear()\n        .domain([d3.min(Object.keys(data)), d3.max(Object.keys(data))])\n        .range([0, width])\n      \n      const y = d3.scaleLinear()\n        .domain([0, d3.max(data.map(d => d.value))])\n        .range([height + 200, 0])\n\n      const xAxis = d3.axisBottom().scale(x)\n      const yAxis = d3.axisLeft().scale(y)\n\n      svg\n        .select('.x-axis')\n        .attr('transform', `translate(${margins.left}, ${margins.top})`)\n        .call(xAxis)\n      \n      svg\n        .select('.y-axis')\n        .attr('transform', `translate(${margins.left}, ${margins.top})`)\n        .call(yAxis)\n\n      svg\n        .select(\".plot-area\")\n        .attr(\"fill\", \"steelblue\")\n        .selectAll(\"bar\") // 'all' means all of the elements below it, even if they don't exist. Here, a number (equal to data length) of 'rect' objects are created with class 'bar' \n        .data(data)\n        .join(\"rect\")\n        .attr(\"class\", \"bar\")\n        .attr(\"x\", (d, i) => i * width / Object.keys(data).length + margins.left)\n        .attr(\"width\", width / Object.keys(data).length - 4)\n        .attr(\"y\", (d) => margins.top)\n        .attr(\"height\", (d) => Math.abs(y(0) - y(d.value)))\n\n    }, [data.length]\n  )\n\n\n\n  useEffect(() => {\n    let tmp = {}\n    for (let i = 0; i < 100; i++) {\n      let num = Math.floor(Math.random() * 10)\n      if(_.has(tmp, num)) {\n        tmp[num] += 1 \n      } else {\n        tmp[num] = 1\n      }\n    }\n    setData(Object.keys(tmp).map(key => ({ key, value: tmp[key] })))\n\n  }, [])\n\n\n  return (<div className=\"BarChartWrapper\">\n    <svg\n      ref={ref}\n      style={{\n        height: \"80vh\",\n        width: \"100%\",\n        marginRight: \"0px\",\n        marginLeft: \"0px\",\n      }}\n    >\n      <g className=\"plot-area\" />\n      <g className=\"x-axis\" />\n      <g className=\"y-axis\" />\n    </svg>\n  </div>)\n};\n\nBarChart.propTypes = {\n  // bla: PropTypes.string,\n};\n\nBarChart.defaultProps = {\n  // bla: 'test',\n};\n\nexport default BarChart;\n","/home/oisin/projects/ChicagoCrimeCC/client/src/hooks/useD3.js",[],{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","replacedBy":"51"},{"ruleId":"52","severity":1,"message":"53","line":34,"column":11,"nodeType":"54","messageId":"55","endLine":34,"endColumn":17},{"ruleId":"56","severity":1,"message":"57","line":72,"column":51,"nodeType":"58","messageId":"59","endLine":72,"endColumn":53},{"ruleId":"60","severity":1,"message":"61","line":88,"column":8,"nodeType":"62","endLine":88,"endColumn":13,"suggestions":"63"},{"ruleId":"56","severity":1,"message":"57","line":95,"column":32,"nodeType":"58","messageId":"59","endLine":95,"endColumn":34},{"ruleId":"52","severity":1,"message":"64","line":2,"column":8,"nodeType":"54","messageId":"55","endLine":2,"endColumn":16},{"ruleId":"52","severity":1,"message":"65","line":3,"column":41,"nodeType":"54","messageId":"55","endLine":3,"endColumn":49},{"ruleId":"52","severity":1,"message":"66","line":5,"column":19,"nodeType":"54","messageId":"55","endLine":5,"endColumn":23},{"ruleId":"52","severity":1,"message":"67","line":6,"column":8,"nodeType":"54","messageId":"55","endLine":6,"endColumn":13},{"ruleId":"60","severity":1,"message":"68","line":78,"column":6,"nodeType":"62","endLine":78,"endColumn":12,"suggestions":"69"},{"ruleId":"52","severity":1,"message":"70","line":94,"column":9,"nodeType":"54","messageId":"55","endLine":94,"endColumn":15},{"ruleId":"52","severity":1,"message":"71","line":101,"column":9,"nodeType":"54","messageId":"55","endLine":101,"endColumn":11},{"ruleId":"52","severity":1,"message":"72","line":2,"column":8,"nodeType":"54","messageId":"55","endLine":2,"endColumn":17},"no-native-reassign",["73"],"no-negated-in-lhs",["74"],"no-unused-vars","'center' is assigned a value but never used.","Identifier","unusedVar","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'db'. Either include it or remove the dependency array.","ArrayExpression",["75"],"'BarChart' is defined but never used.","'database' is defined but never used.","'line' is defined but never used.","'Graph' is defined but never used.","React Hook useEffect has a missing dependency: 'testRef'. Either include it or remove the dependency array.",["76"],"'graph2' is assigned a value but never used.","'c2' is assigned a value but never used.","'PropTypes' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"77","fix":"78"},{"desc":"79","fix":"80"},"Update the dependencies array to be: [db, map]",{"range":"81","text":"82"},"Update the dependencies array to be: [data, testRef]",{"range":"83","text":"84"},[2428,2433],"[db, map]",[1839,1845],"[data, testRef]"]